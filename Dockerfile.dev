# Etapa 1: Desarrollo y compilaciÃ³n
FROM node:22-alpine AS development

WORKDIR /app

COPY package*.json ./

RUN npm install

COPY . .

COPY prisma ./prisma

# ðŸ‘‡ Esto es clave
RUN npx prisma generate

# Instala herramientas Ãºtiles para desarrollo
RUN npm install -g @nestjs/cli ts-node-dev

CMD ["ts-node-dev", "--respawn", "--transpile-only", "src/main.ts"]

EXPOSE 3000